<!DOCTYPE html>
<html lang="en">
    <head>
        <title><%= title %></title>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0,shrink-to-fit=no">
        <link rel="icon" type="image/x-icon" href="/img/icons/icons8-project-management-96.png">

        <!-- Material Design Web Components -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://unpkg.com/material-components-web/dist/material-components-web.min.css">
        <script src="https://unpkg.com/material-components-web/dist/material-components-web.min.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

        <!-- Bootstrap -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

        <!-- TOAST UI Calendar -->
        <link rel="stylesheet" href="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.css" />
        <!-- <script src="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.js"></script> -->
        <script src="https://uicdn.toast.com/calendar/latest/toastui-calendar.ie11.min.js"></script>

        <link id="window-style" rel="stylesheet" href="/styles/style-dark.css">
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js" integrity="sha512-dfX5uYVXzyU8+KHqj8bjo7UkOdg18PaOtpa48djpNbZHwExddghZ+ZmzWT06R5v6NSk3ZUfsH6FNEDepLx9hPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <script type="text/javascript" src="/js/loader.js" async></script>
    </head>
    <body>

    <header class="header">
        <nav class="nav">
            <div class="nav-logo">
                <div class="nav-logo-img">
                    <a href="/">
                        <img src="/img/Pulse_Project_Transparent.png" alt="Pulse Project">
                    </a>
                </div>
            </div>
            <ul class="nav-ul">
                <li class="nav-li">
                    <a class="nav-link" href="/">
                        <i class="bi bi-calendar-week"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-li">
                    <a class="nav-link" href="/about">
                        <i class="bi bi-file-text"></i>
                        <span>About</span>
                    </a>
                </li>
                <li class="nav-li">
                    <a class="nav-link" href="/contact">
                        <i class="bi bi-telephone-fill"></i>
                        <span>Contact</span>
                    </a>
                </li>
            </ul>

            <% if (session.authenticated) { %>
            <div class="nav-profile">
                <a class="nav-link nav-profile-link" onclick="toggleMenu()">
                    <i class="bi bi-person-circle"></i>
                    <span>Profile</span>
                </a>
            </div>
            <% } %>
        </nav>
        <% if (session.authenticated) { %>
        <div class="nav-profile-wrap" id="navProfile">
            <div class="profile-menu">
                <div class="user-info">
                    <h2><%= locals?.user?.display_name || "Lorem Ipsum" %></h2>
                    <img src="" alt="">
                </div>
                <hr>
                <a class="nav-link profile-menu-link" href="/project/assign">
                    <i class="bi bi-people-fill"></i>
                    <p>Assign Team Members</p>
                    <span>></span>
                </a>
                <a class="nav-link profile-menu-link" href="/user/profile">
                    <i class="bi bi-gear-fill"></i>
                    <p>Edit Profile</p>
                    <span>></span>
                </a>
                <a class="nav-link profile-menu-link" href="/help">
                    <i class="bi bi-question-diamond-fill"></i>
                    <p>Help & Support</p>
                    <span>></span>
                </a>
                <a class="nav-link profile-menu-link" href="/user/logout">
                    <i class="bi bi-box-arrow-right"></i>
                    <p>Logout</p>
                    <span>></span>
                </a>
            </div>
        </div>
        <% } %>
    </header>

    <script>
    // const navProfile = document.getElementById("navProfile");

    // function toggleMenu() {
    //     navProfile.classList.toggle("open-menu");
    // }

    // function closeMenu() {
    //     navProfile.classList.remove("open-menu");
    // }

    // let timeoutId = null;

    // navProfile.addEventListener("mouseenter", () => {
    //     clearTimeout(timeoutId);
    // })

    // navProfile.addEventListener("mouseleave", () => {
    //     timeoutId = setTimeout(closeMenu, 500);
    // });
    </script>